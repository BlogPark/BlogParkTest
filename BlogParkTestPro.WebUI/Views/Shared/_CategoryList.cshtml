@using BlogParkTestPro.Model
@model List<LogCategory>
<div class="clearfix" style="height:100px;position:relative;">
    <ul id="menu" class="ui-menu ui-widget ui-widget-content ui-corner-all" role="menu" tabindex="0" aria-activedescendant="ui-id-22">
        @foreach (LogCategory item in Model)
        {
            if (item.FatherID == -1)
            {
                var query = from p in Model
                            where p.FatherID == item.CategoryID
                            select p;
                if (query.Count()>0)
                {
                    <li class="ui-menu-item" role="presentation">
                        <a class="ui-corner-all" href="#" aria-haspopup="true" tabindex="-1" role="menuitem">
                            <span class="ui-menu-icon ui-icon ui-icon-carat-1-e"></span>
                        @item.CategoryName</a>
                        <ul class="ui-menu ui-widget ui-widget-content ui-corner-all" style="display: none; top: 9812.5px; left: 212px;" role="menu" aria-expanded="false" aria-hidden="true">
                            @foreach (var ite in query)
                            {
                                <li class="ui-menu-item" role="presentation"><a class="ui-corner-all" href="#" tabindex="-1" role="menuitem">@ite.CategoryName</a></li>
                            }
                        </ul>

                    </li>
                }
                else 
                {
                    <li class="ui-menu-item" role="presentation">
                        <a class="ui-corner-all" href="#" tabindex="-1" role="menuitem">@item.CategoryName</a>
                    </li>
                }
            }
        }
    </ul>
</div>
<script type="text/javascript">
    $("#menu").menu();
</script>
